<!--
 * @Author: wxfeiang
 * @Description: 
 * @Date: 2023-05-03 18:35:12
 * @LastEditTime: 2023-07-17 21:44:01
 * @FilePath: /js/echarts/bar3.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bar</title>
</head>
<style>
    .main {
        width: 500px;
        height: 400px;
        margin: 0 auto;
        border: 1px solid #ccc;
    }
</style>

<body>
    <div class="" id="app">

        <div class="main" id="main"></div>
    </div>



</body>
<script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.13/vue.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.2/echarts.common.js"></script>
<script>
    new Vue({
        el: '#app',
        data() {
            return {
                myChart: null,
                timeOut: null,
                allData: [],


            }
        },
        mounted() {

            this.init()
            this.autoMove()

        },
        methods: {
            init() {
                this.myChart = echarts.init(document.getElementById('main'));

                let colorList = [
                    "#f36c6c",
                    "#e6cf4e",
                    "#20d180",
                    "#0093ff",
                    "#f36c6c",
                    "#e6cf4e",
                    "#20d180",
                    "#0093ff"
                ];

                this.allData = [
                    {
                        name: "Êù≠Â∑ûÂ∏Ç",
                        count: 100,
                        percent: 0.182
                    },
                    {
                        name: "ÂÆÅÊ≥¢Â∏Ç",
                        count: 366,

                        percent: 0.22
                    },

                    {
                        name: "Ê∏©Â∑ûÂ∏Ç",

                        count: 733,

                        percent: 0.452
                    },

                    {
                        name: "ÊπñÂ∑ûÂ∏Ç",

                        count: 287,

                        percent: 0.229
                    },

                    {
                        name: "‰∏ΩÊ∞¥Â∏Ç",

                        count: 89,

                        percent: 0.082
                    },

                    {
                        name: "ËàüÂ±±Â∏Ç",

                        count: 25,

                        percent: 0.112
                    },
                    {
                        name: "‰∏ΩÊ∞¥Â∏Ç2",

                        count: 89,

                        percent: 0.082
                    },

                    {
                        name: "ËàüÂ±±Â∏Ç2",

                        count: 25,

                        percent: 0.112
                    }
                ];
                option = {
                    tooltip: {
                        trigger: "axis",
                        axisPointer: {
                            type: "shadow"
                        }
                    },

                    legend: {
                        show: false
                    },

                    // Âä†ËøôÂùóÂú∞ÊñπÈáçÁÇπÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅÔºÅ
                    dataZoom: [
                        //ÊªëÂä®Êù°
                        {
                            yAxisIndex: 0, //ËøôÈáåÊòØ‰ªéXËΩ¥ÁöÑ0ÂàªÂ∫¶ÂºÄÂßã
                            show: false, //ÊòØÂê¶ÊòæÁ§∫ÊªëÂä®Êù°Ôºå‰∏çÂΩ±Âìç‰ΩøÁî®
                            type: "slider", // Ëøô‰∏™ dataZoom ÁªÑ‰ª∂ÊòØ slider Âûã dataZoom ÁªÑ‰ª∂
                            startValue: 0, // ‰ªéÂ§¥ÂºÄÂßã„ÄÇ
                            endValue: 4, // ‰∏ÄÊ¨°ÊÄßÂ±ïÁ§∫5‰∏™„ÄÇ
                        },
                    ],
                    xAxis: {
                        type: "value",

                        splitLine: {
                            show: false
                        },

                        axisLabel: {
                            show: false
                        },

                        axisTick: {
                            show: false
                        },

                        axisLine: {
                            show: false
                        }
                    },

                    yAxis: [
                        {
                            type: "category",

                            inverse: true,

                            axisLine: {
                                show: false
                            },

                            axisTick: {
                                show: false
                            },

                            axisPointer: {
                                label: {
                                    show: true
                                }
                            },

                            data: this.allData.map(item => item.name),

                            axisLabel: {
                                margin: 20,

                                fontSize: 14,

                                color: "#333"
                            }
                        },

                        {
                            type: "category",

                            inverse: true,

                            axisTick: "none",

                            axisLine: "none",
                            offset: -10,
                            zlevel: 100,
                            show: true,
                            position: "left",
                            axisLabel: {
                                textStyle: {
                                    color: "#000",
                                    // fontSize: "10"
                                    align: 'left'
                                }
                            },
                            data: this.allData.map(item => item.count)
                        }
                    ],
                    series: [
                        {
                            z: 2,
                            name: "value",
                            type: "bar",
                            align: "left",
                            //   barCategoryGap: '50%',
                            data: this.allData
                                .map(item => item.percent)
                                .map((item, i) => {
                                    itemStyle = {
                                        color: colorList[i]
                                    };
                                    return {
                                        value: item,
                                        itemStyle: itemStyle
                                    };
                                }),
                            label: {
                                normal: {
                                    show: true,
                                    position: "right",
                                    color: "#333333",
                                    fontSize: 14,
                                    formatter: function (value) {
                                        let val = (value && value.data && value.data.value) || 0;
                                        return parseFloat(val * 100).toFixed(2) + "%";
                                    }
                                }
                            }
                        }
                    ]
                };
                this.myChart.setOption(option)
            },
            autoMove() {
                // Ëá™Âä®ÊªöÂä®Ôºö
                this.timeOut = setInterval(() => {
                    if (option.dataZoom[0].endValue == this.allData.length) {
                        option.dataZoom[0].endValue = 4;
                        option.dataZoom[0].startValue = 0;
                    } else {
                        option.dataZoom[0].endValue = option.dataZoom[0].endValue + 1;
                        option.dataZoom[0].startValue = option.dataZoom[0].startValue + 1;
                    }
                    console.log('ü•©[option]:', window.option);
                    this.myChart.setOption(option);
                    this.myChart.on('mouseover', this.stop())
                    this.myChart.on('mouseout', this.goMove())
                }, 2000)
            },
            //ÂÅúÊ≠¢ÊªöÂä®
            stop() {
                clearInterval(this.timeOut)
            },
            //ÁªßÁª≠ÊªöÂä®
            goMove() {
                this.autoMove()
            }
        }


    })




</script>

</html>